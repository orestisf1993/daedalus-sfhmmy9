\section{Περιγραφή του android app}
% Backup original figurename command to restore later.
\let\originalfigurename\figurename
% Set figurename command.
\renewcommand{\figurename}{Εικόνα}
\newcommand{\screenshot}[2]{%
\begin{subfigure}{0.5\textwidth}%
\centering%
\includegraphics[keepaspectratio, width=0.4\textwidth]{screenshots/#1}%
\caption{#2}
\label{fig:#1}%
\end{subfigure}%
}

\begin{figure}[htbp]
        \screenshot{start}{Αρχική οθόνη}%
        \screenshot{locked}{Οθόνη για εισαγωγή κωδικού για ξεκλείδωμα}
        \screenshot{bluetooth-open}{Ερώτηση για άνοιγμα bluetooth}%
        \screenshot{not-connected}{Κατάσταση χωρίς σύνδεση με τα bluetooth του κυκλώματος}
        \screenshot{not-protected}{Κατάσταση χωρίς προστασία}%
        \screenshot{protected}{Κατάσταση με προστασία}
        \screenshot{ring}{Κατάσταση αναπαραγωγής ήχου για την εύρεση της συσκευής}
        \caption{Οι διάφορες καταστάσεις της εφαρμογής}
\end{figure}

Για την ανάπτυξη της εφαρμογής μας χρησιμοποιήθηκε το android studio και το αντίστοιχο API για Bluetooth.
Παρακάτω υπάρχουν κάποια επιμέρους ζητήματα που αναλύονται περισσότερο.

\subsection{Ισχύς Ζεύξης Συσκευών}
Βασική απαίτηση της εφαρμογής μας ήταν να έχει την δυνατότητα εκτίμησης της απόστασης.
Το API του Android όμως δεν δίνει την τιμή RSSI (Received Signal Strength Indication) όταν είναι συνδεδεμένο ένα κινητό με ένα bluetooth.
Η τιμή του rssi δίνεται μόνο κατά την διαδικασία της αναζήτησης συσκευών (discovery) κατά την οποία όμως δεν μπορούμε να βρούμε συσκευές με τις οποίες ήμαστε ήδη συνδεδεμένοι.
Συνεπώς, χρησιμοποιήθηκαν 2 bluetooth στην εφαρμογή μας: ένα για discovery και ένα για connection.

Για να μπορούμε να μετρήσουμε την απόσταση των δύο συσκευών μας, είναι
απαραίτητο να γνωρίζουμε την ισχύ της ζεύξης των δύο συσκευών.
Το API του android μας επιστρέφει την τιμή του rssi σε dB με τον τρόπο που αναφέρθηκε.

Μέσα από διάφορα πειράματα που εκτελέστηκαν κατά την διάρκεια του διαγωνισμού
φτάσαμε στα παρακάτω συμπεράσματα:
\begin{itemize}
\item Η απόσταση στην οποία πρέπει να ενεργοποιείται ο κίνδυνος είναι 5 με 6
μέτρα.
\item Σε απόσταση 4 με 5 μέτρα πρέπει να βρισκόμαστε στην κατάσταση στην οποία
υπάρχει προειδοποίηση για πιθανό κίνδυνο.
\end{itemize}

Οπότε, καταλήξαμε πως για τιμές του rssi μεγαλύτερες από -75dB βρισκόμαστε σε
ασφαλή κατάσταση.
Για τιμές μεταξύ -75dB και -80dB βρισκόμαστε σε κατάσταση πιθανού
κινδύνου, ενώ σε τιμές μικρότερες από -80dB σε κατάσταση κινδύνου.

\subsection{Λογική του Προγράμματος}
Επειδή η εφαρμογή μας πρέπει να λειτουργεί με κάποιου είδους μνήμη στις εισόδους που δέχεται (πάτημα κουμπιών, ισχύς σήματος) χρησιμοποιήθηκε η λογική των states για να δομηθεί το πρόγραμμά μας.
Τα states καθώς και οι μεταβάσεις φαίνονται στο
\renewcommand{\figurename}{Σχήμα}
\hyperref[fig:stdiag]{\figurename{} \ref{fig:stdiag}}.
\begin{figure}[H]
    \centering
    \includegraphics[keepaspectratio, width=\linewidth]{images/state-diagram}
    \caption{Το διάγραμμα καταστάσεων}
    \label{fig:stdiag}
\end{figure}
